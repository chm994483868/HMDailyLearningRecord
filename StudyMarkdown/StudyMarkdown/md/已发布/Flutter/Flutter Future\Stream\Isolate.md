# Flutter Future\Stream\Isolate

&emsp;谈到 Flutter UI 卡顿问题时，首先要理解 Flutter 的单线程模型（或者是 Dart 的单线程模型）。  

&emsp;首先要明确一个点：异步操作并不代表开辟了线程。

1. Flutter 中的单线程模型。
```
Dart是一种事件驱动的编程语言，它采用单线程执行模型，其中有一个事件循环和两个队列。这种结构可以帮助管理和处理事件，从而实现并发和异步编程。
```

2. Dart 一个事件循环和两个队列：微任务队列 事件队列。
```
在Dart中，存在两个重要的队列，它们是：

1. 事件队列（Event Queue）：事件队列存储在主事件循环中需要被执行的事件，例如用户输入、网络请求响应等。这些事件会按照先进先出的顺序被处理。
2. 微任务队列（Microtask Queue）：微任务队列存储在事件队列之前的任务，被称为微任务。微任务通常是由Promise或Future等异步操作产生的，它们具有比事件更高优先级，会在事件队列中的下一个事件之前立即执行。

在Dart的执行模型中，事件循环将不断地从微任务队列中获取任务执行，直到微任务队列为空，然后再去处理事件队列中的事件。这种任务调度方式确保了Dart代码的顺序执行，并避免了阻塞事件循环。
```

2. Dart 中有线程吗？
```
Dart 中没有直接的线程概念。Dart 使用了单线程的执行模型，称为事件循环(Event Loop)。在 Dart 中，所有的代码都在单个执行线程上运行，通过事件循环机制来处理异步操作。当有异步操作发生时（例如 I/O 操作、定时器等），事件循环会将这些操作放入队列中，并按照顺序执行。通过异步操作和事件循环的组合，Dart 实现了非阻塞的并发编程。此外，Dart 中还提供了 Isolate（隔离区）的概念，可以创建并发执行的独立计算。每个 Isolate 都运行在自己的事件循环上，但不同 Isolate 之间的通信需要通过消息传递来实现。
``` 

## 参考链接
**参考链接:🔗**
+ [Flutter in Focus 系列视频](https://www.youtube.com/watch?v=vl_AaCgudcY&list=RDCMUCwXdFgeE9KYzlDdR7TG9cMw&index=19)
+ [以生活例子说明单线程与多线程](https://cloud.tencent.com/developer/article/1340815?areaId=106001)

