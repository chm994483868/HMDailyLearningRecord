#  ä¸´æ—¶é¢˜çº²

1. iOS å±å¹•æˆåƒåŸç†ï¼ˆç¦»å±æ¸²æŸ“ Off-screen Renderedï¼‰ã€‚
2. atomicã€nonatomicã€strongï¼ˆretainï¼‰ã€weakï¼ˆunsafe_unretainedï¼‰ã€assign å±æ€§ä¿®é¥°ç¬¦çš„å·¥ä½œåŸç†ã€‚ï¼ˆ\_\_strongã€\_\_weakã€\_\_unsafe_unretainedï¼‰
3. weak åº•å±‚å®ç°åŸç†ã€‚
  + DisguisedPtr<objc_object> DisguisedPtr<objc_object *> ä¼ªè£…æŒ‡é’ˆï¼ŒæŠŠåœ°å€å˜ä¸ºæ•´æ•°ä¿å­˜ã€‚
  + typedef DisguisedPtr<objc_object *> weak_referrer_t; weak å˜é‡çš„åœ°å€ï¼Œå³ä¸€ä¸ªæŒ‡é’ˆçš„æŒ‡é’ˆã€‚
  + struct weak_entry_t ä¿å­˜æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰ weak å˜é‡åœ°å€çš„å“ˆå¸Œè¡¨ã€‚
  + struct weak_table_t ä¿å­˜å¯¹è±¡å’Œå…¶ weak_entry_t çš„å“ˆå¸Œè¡¨ã€‚
  + struct SideTable æŸä¸ªå¯¹è±¡æ‰€å¤„çš„ SideTable è¡¨ï¼Œæœ‰ä¸‰ä¸ªæˆå‘˜å˜é‡ï¼šspinlock_t slockã€RefcountMap refcntsã€weak_table_t weak_tableã€‚
  + static StripedMap<SideTable>& SideTables ä¿å­˜ 8/64 å¼  SideTableï¼Œè·å–æŸä¸ªå¯¹è±¡æ‰€å¤„çš„ SideTableï¼šSideTable *table = &SideTables()[obj]ã€‚
  
  + å¯¹ weak_entry_t å’Œ weak_table_t çš„å“ˆå¸Œæ•°ç»„è¿›è¡Œæ“ä½œã€‚å­˜æ”¾ weak å˜é‡å’Œç§»é™¤ weak å˜é‡ã€weak å˜é‡ç½®ä¸º nil ç­‰æ“ä½œã€‚
  
  + objc_loadWeakRetainedã€objc_loadWeak weak å˜é‡è¯»å–ã€‚ï¼ˆobjc_copyWeakã€objc_moveWeakï¼‰
  
4. AssociatedObject åº•å±‚å®ç°åŸç†ã€‚class ObjcAssociation ç”¨äºä¿å­˜å…³è”ç­–ç•¥å’Œå…³è”å€¼ã€‚ObjectAssociationMap æ˜¯ key æ˜¯ const void *ï¼ˆç”¨äºæ ‡è¯†æŸä¸ªå…³è”å€¼çš„ keyï¼‰ï¼Œvalue æ˜¯ ObjcAssociation çš„å“ˆå¸Œè¡¨ã€‚AssociationsHashMap æ˜¯ key æ˜¯ DisguisedPtr<objc_object>ï¼Œvalue æ˜¯ ObjectAssociationMap çš„å“ˆå¸Œè¡¨ã€‚AssociationsManager æ˜¯ key æ˜¯ DisguisedPtr<objc_object>ï¼Œvalue æ˜¯ ObjectAssociationMap çš„å“ˆå¸Œè¡¨ã€‚
5. Category åº•å±‚å®ç°åŸç†ã€‚æ¦‚å¿µä¸æ•°æ®ç»“æ„ï¼šcategory_tã€‚è¿½åŠ  attachListsã€methodizeClassï¼Œå…ˆç¼–è¯‘çš„å…ˆè¿½åŠ ï¼Œæ—§å‡½æ•°å‘åç§»åŠ¨ï¼Œæ–°å‡½æ•°ä»å¤´å¼€å§‹è¿½åŠ ï¼Œæ‰€ä»¥åç¼–è¯‘çš„ category ä¼šè¿½åŠ åˆ°åˆ—è¡¨çš„æœ€å‰é¢å»ã€‚+ load å‡½æ•°æ‰§è¡Œã€‚
6. TaggedPointer çŸ¥è¯†ç‚¹ã€‚


+ [iOSç¦»å±æ¸²æŸ“](https://juejin.cn/post/6847902220248170510)


## å‚è€ƒé“¾æ¥
**å‚è€ƒé“¾æ¥:ğŸ”—**
+ [NSCoding](https://developer.apple.com/library/archive/documentation/LegacyTechnologies/WebObjects/WebObjects_3.5/Reference/Frameworks/ObjC/Foundation/Protocols/NSCoding/Description.html#//apple_ref/occ/intf/NSCoding)


1. éŸ³è§†é¢‘å¤„ç†æ–¹å‘ã€‚
2. ç¼–è¯‘åŸç†ï¼Œé˜…è¯»ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹ã€‚
3. å¤ä¹ ã€ç®—æ³•ã€è®¡ç®—æœºç½‘ç»œã€‚

## 58åŒåŸé¢è¯•é¢˜
1. ç®€å•çš„è‡ªæˆ‘ä»‹ç»ã€‚
2. ä»‹ç» http å’Œ httpsã€‚
3. TCP å’Œ UDP çš„åŒºåˆ«ã€‚
4. KVC å’Œ KVO çš„åŸç†ä»¥åŠè¿½é—® KVO é‡å†™ Setter å‡½æ•°ååŸå§‹ Setter å‡½æ•°ä¼šæ€ä¹ˆæ ·ã€‚
5. VC çš„ç”Ÿå‘½å‘¨æœŸã€‚
6. viewDidLoad å‡½æ•°ä¸­åˆ›å»ºçš„ä¸€ä¸ªå±€éƒ¨ OC å˜é‡ä»€ä¹ˆæ—¶å€™é”€æ¯ã€‚
7. æ€ä¹ˆåŒºåˆ†å †åŒºå’Œæ ˆåŒºã€‚
8. block çš„åˆ†ç±»ã€‚
9. runloop çš„å·¥ä½œåŸç†ã€‚
10. runtime çš„æ¶ˆæ¯å‘é€æµç¨‹ï¼Œruntime çš„å¸¸ç”¨åœºæ™¯ã€‚
11. UIView å’Œ CALayer çš„å…³ç³»ã€‚
12. CoreAnimation å®ç°åŠ¨ç”»ã€‚
13. CoreML çš„ä½¿ç”¨ã€‚
14. è·¨å¹³å°çš„ä½¿ç”¨ã€‚
15. æ•°æ®åº“çš„ä½¿ç”¨ä»¥åŠå¤šè¡¨è¿æŸ¥ç±»ä¼¼çš„ç›¸å…³çš„å†…å®¹ã€‚
16. è§†é¢‘ç¼“å­˜æœºåˆ¶ã€‚
17. è§£é‡Šå¤šçº¿ç¨‹ï¼Œçº¿ç¨‹å’Œé˜Ÿåˆ—çš„å…³ç³»ã€‚
18. iOS 10 å‰åçš„æ¨é€å°è£…ã€‚
19. æ–­ç‚¹ç»­ä¼ çš„å®ç°ã€‚
20. é€†å‘æœ‰æ²¡æœ‰äº†è§£è¿‡ã€‚
21. å®šæ—¶å™¨ dispatch_source å’Œ NSTimerï¼ŒNSTimer ä¸ºä»€ä¹ˆç²¾åº¦ä½ã€‚

1. æ–æ³¢é‚£å¥‘æ•°åˆ—ç®—æ³•
2. äºŒå‰æ ‘çš„æ·±åº¦å’Œå¹¿åº¦éå†
3. 50000ä¸ªæ•°ä¸­å‰ 5 ä¸ªå¤§çš„æ•°
4. äºŒå‰æ ‘çš„éé€’å½’å‰åºéå†


1. åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«ï¼Œä»¥åŠå®ƒä»¬çš„å„è‡ªçš„ä½¿ç”¨åœºæ™¯ã€‚
ç­”ï¼šé¦–å…ˆè¦ç†è§£åŒæ­¥å’Œå¼‚æ­¥æ‰§è¡Œçš„æ¦‚å¿µï¼ŒåŒæ­¥å’Œå¼‚æ­¥ç›®çš„ä¸æ˜¯ä¸ºäº†æ˜¯å¦åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼ŒåŒæ­¥ä¼šé˜»å¡å½“å‰å‡½æ•°çš„è¿”å›ï¼Œå¼‚æ­¥å‡½æ•°ä¼šç«‹å³è¿”å›æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼›

2. ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿ
ç­”ï¼šæ­»é”å°±æ˜¯é˜Ÿåˆ—å¼•èµ·çš„å¾ªç¯ç­‰å¾…

[iOS å¤šçº¿ç¨‹é¢è¯•é¢˜ï¼ˆæ­»é”ï¼‰](https://www.jianshu.com/p/1f1b9516c631)

3. ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼ŸObjective-C å’Œ Swift ä¸‹åˆ†åˆ«æ˜¯æ€ä¹ˆå®ç°çš„ã€‚

4. ä»€ä¹ˆæ˜¯ ARC ä»¥åŠ ARC çš„å·¥ä½œåŸç†ï¼ŒARC ä¸‹ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Ÿ
ç­”ï¼šARC æ˜¯ç”±ç¼–è¯‘å™¨å’Œ runtime åä½œçš„ç»“æœã€‚ARC ä¸­ç¦æ­¢æ‰‹åŠ¨è°ƒç”¨ retain/release/retainCount/dealloc(dealloc å¯é‡å†™ï¼Œä½†æ˜¯ä¸èƒ½æ˜¾ç¤ºè°ƒç”¨) æ–¹æ³•ã€‚å½“æˆ‘ä»¬ç¼–è¯‘æºç æ—¶ï¼Œç¼–è¯‘å™¨ä¼šåˆ†ææºç ä¸­æ¯ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç„¶ååŸºäºè¿™äº›å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ¥æ·»åŠ ç›¸åº”çš„å¼•ç”¨è®¡æ•°æ“ä½œä»£ç ã€‚ARC ä¸­æ–°å¢äº† weak/strong å…³é”®å±æ€§å…³é”®å­—ã€‚

5. å¦‚ä½•æœ€å¤§é™åº¦çš„ä¿è¯ TableView çš„æ»‘åŠ¨æµç•…åº¦ã€‚
6. å¦‚ä½•å®ç°æ¨ªç«–å±ä¸‹çš„ä¸‰ç­‰åˆ†çº¦æŸã€‚


## ä»€ä¹ˆæ˜¯ ARC ä»¥åŠ ARC çš„å·¥ä½œåŸç†ï¼ŒARC ä¸‹ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Ÿ

***

## UIView ä¸ CALayer  CoreAnimation 

***


## iOS åŸç”Ÿä¸ ReactNative äº¤äº’

1. iOS æ—¥å†æ¨¡å—æ¼”ç¤º
&emsp;åœ¨ React Native ä¸­ï¼Œä¸€ä¸ª â€œåŸç”Ÿæ¨¡å—â€ å°±æ˜¯ä¸€ä¸ªå®ç°äº† â€œRCTBridgeModuleâ€ åè®®çš„ Objective-C ç±»ï¼Œå…¶ä¸­ RCT æ˜¯ ReaCT çš„ç¼©å†™ã€‚
```c++
// CalendarManager.h
#import <React/RCTBridgeModule.h>

@interface CalendarManager : NSObject <RCTBridgeModule>
@end
```
&emsp;ä¸ºäº†å®ç°RCTBridgeModuleåè®®ï¼Œä½ çš„ç±»éœ€è¦åŒ…å«RCT_EXPORT_MODULE()å®ã€‚è¿™ä¸ªå®ä¹Ÿå¯ä»¥æ·»åŠ ä¸€ä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šåœ¨ JavaScript ä¸­è®¿é—®è¿™ä¸ªæ¨¡å—çš„åå­—ã€‚å¦‚æœä½ ä¸æŒ‡å®šï¼Œé»˜è®¤å°±ä¼šä½¿ç”¨è¿™ä¸ª Objective-C ç±»çš„åå­—ã€‚å¦‚æœç±»åä»¥ RCT å¼€å¤´ï¼Œåˆ™ JavaScript ç«¯å¼•å…¥çš„æ¨¡å—åä¼šè‡ªåŠ¨ç§»é™¤è¿™ä¸ªå‰ç¼€ã€‚
```c++
// CalendarManager.m
#import "CalendarManager.h"

@implementation CalendarManager

// To export a module named CalendarManager
RCT_EXPORT_MODULE(); // æŒ‡å®šåœ¨ JavaScript ä¸­è®¿é—®è¿™ä¸ª CalendarManager æ¨¡å—

// This would name the module AwesomeCalendarManager instead
// RCT_EXPORT_MODULE(AwesomeCalendarManager);

@end
```
&emsp;ä½ å¿…é¡»æ˜ç¡®çš„å£°æ˜è¦ç»™ JavaScript å¯¼å‡ºçš„æ–¹æ³•ï¼Œå¦åˆ™ React Native ä¸ä¼šå¯¼å‡ºä»»ä½•æ–¹æ³•ã€‚å£°æ˜é€šè¿‡ RCT_EXPORT_METHOD() å®æ¥å®ç°ï¼š
```c++
#import "CalendarManager.h"
#import <React/RCTLog.h>

@implementation CalendarManager

RCT_EXPORT_MODULE();

RCT_EXPORT_METHOD(addEvent:(NSString *)name location:(NSString *)location)
{
  RCTLogInfo(@"Pretending to create an event %@ at %@", name, location);
}

@end
```
&emsp;ç°åœ¨ä» Javascript é‡Œå¯ä»¥è¿™æ ·è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼š
```c++
import { NativeModules } from 'react-native';
const CalendarManager = NativeModules.CalendarManager;
CalendarManager.addEvent(
  'Birthday Party',
  '4 Privet Drive, Surrey'
);
```
> æ³¨æ„: JavaScript æ–¹æ³•å
> 
> å¯¼å‡ºåˆ° JavaScript çš„æ–¹æ³•åæ˜¯ Objective-C çš„æ–¹æ³•åçš„ç¬¬ä¸€ä¸ªéƒ¨åˆ†ã€‚React Native è¿˜å®šä¹‰äº†ä¸€ä¸ª RCT_REMAP_METHOD() å®ï¼Œå®ƒå¯ä»¥æŒ‡å®š JavaScript æ–¹æ³•åã€‚å› ä¸º JavaScript ç«¯ä¸èƒ½æœ‰åŒåä¸åŒå‚çš„æ–¹æ³•å­˜åœ¨ï¼Œæ‰€ä»¥å½“åŸç”Ÿç«¯å­˜åœ¨é‡è½½æ–¹æ³•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå®æ¥é¿å…åœ¨ JavaScript ç«¯çš„åå­—å†²çªã€‚

&emsp;æ¡¥æ¥åˆ° JavaScript çš„æ–¹æ³•è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯ voidã€‚React Native çš„æ¡¥æ¥æ“ä½œæ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥è¦è¿”å›ç»“æœç»™ JavaScriptï¼Œä½ å¿…é¡»é€šè¿‡å›è°ƒæˆ–è€…è§¦å‘äº‹ä»¶æ¥è¿›è¡Œã€‚

&emsp;åŸç”Ÿæ¨¡å—ä¸åº”å¯¹è‡ªå·±è¢«è°ƒç”¨æ—¶æ‰€å¤„çš„çº¿ç¨‹åšä»»ä½•å‡è®¾ã€‚React Native åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ä¸²è¡Œ GCD é˜Ÿåˆ—ä¸­è°ƒç”¨åŸç”Ÿæ¨¡å—çš„æ–¹æ³•ï¼Œä½†è¿™å±äºå®ç°çš„ç»†èŠ‚ï¼Œå¹¶ä¸”å¯èƒ½ä¼šåœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­æ”¹å˜ã€‚é€šè¿‡å®ç°æ–¹æ³•- (dispatch_queue_t)methodQueueï¼ŒåŸç”Ÿæ¨¡å—å¯ä»¥æŒ‡å®šè‡ªå·±æƒ³åœ¨å“ªä¸ªé˜Ÿåˆ—ä¸­è¢«æ‰§è¡Œã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœæ¨¡å—éœ€è¦è°ƒç”¨ä¸€äº›å¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰èƒ½ä½¿ç”¨çš„ APIï¼Œé‚£åº”å½“è¿™æ ·æŒ‡å®šï¼š
```c++
- (dispatch_queue_t)methodQueue
{
  return dispatch_get_main_queue();
}
```
&emsp;ç±»ä¼¼çš„ï¼Œå¦‚æœä¸€ä¸ªæ“ä½œéœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´ï¼ŒåŸç”Ÿæ¨¡å—ä¸åº”è¯¥é˜»å¡ä½ï¼Œè€Œæ˜¯åº”å½“å£°æ˜ä¸€ä¸ªç”¨äºæ‰§è¡Œæ“ä½œçš„ç‹¬ç«‹é˜Ÿåˆ—ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒRCTAsyncLocalStorageæ¨¡å—åˆ›å»ºäº†è‡ªå·±çš„ä¸€ä¸ª queueï¼Œè¿™æ ·å®ƒåœ¨åšä¸€äº›è¾ƒæ…¢çš„ç£ç›˜æ“ä½œçš„æ—¶å€™å°±ä¸ä¼šé˜»å¡ä½ React æœ¬èº«çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼š
```c++
- (dispatch_queue_t)methodQueue
{
  return dispatch_queue_create("com.facebook.React.AsyncLocalStorageQueue", DISPATCH_QUEUE_SERIAL);
}
```
&emsp;æŒ‡å®šçš„ methodQueue ä¼šè¢«ä½ æ¨¡å—é‡Œçš„æ‰€æœ‰æ–¹æ³•å…±äº«ã€‚å¦‚æœä½ çš„æ–¹æ³•ä¸­ â€œåªæœ‰ä¸€ä¸ªâ€ æ˜¯è€—æ—¶è¾ƒé•¿çš„ï¼ˆæˆ–è€…æ˜¯ç”±äºæŸç§åŸå› å¿…é¡»åœ¨ä¸åŒçš„é˜Ÿåˆ—ä¸­è¿è¡Œçš„ï¼‰ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä½“å†…ç”¨ dispatch_async æ–¹æ³•æ¥åœ¨å¦ä¸€ä¸ªé˜Ÿåˆ—æ‰§è¡Œï¼Œè€Œä¸å½±å“å…¶ä»–æ–¹æ³•ï¼š
```c++
RCT_EXPORT_METHOD(doSomethingExpensive:(NSString *)param callback:(RCTResponseSenderBlock)callback)
{
  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // åœ¨è¿™é‡Œæ‰§è¡Œé•¿æ—¶é—´çš„æ“ä½œ
    ...
    // ä½ å¯ä»¥åœ¨ä»»ä½•çº¿ç¨‹/é˜Ÿåˆ—ä¸­æ‰§è¡Œå›è°ƒå‡½æ•°
    callback(@[...]);
  });
}
```

&emsp;bridge ä¼šè‡ªåŠ¨æ³¨å†Œå®ç°äº† RCTBridgeModule åè®®çš„æ¨¡å—ï¼Œä½†æ˜¯ä½ å¯èƒ½ä¹Ÿå¸Œæœ›èƒ½å¤Ÿè‡ªå·±å»åˆå§‹åŒ–è‡ªå®šä¹‰çš„æ¨¡å—å®ä¾‹ï¼ˆè¿™æ ·å¯ä»¥æ³¨å…¥ä¾èµ–ï¼‰ã€‚

&emsp;è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œä½ éœ€è¦å®ç° RCTBridgeDelegate åè®®ï¼Œåˆå§‹åŒ– RCTBridgeï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–æ–¹æ³•é‡ŒæŒ‡å®šä»£ç†ã€‚ç„¶åç”¨åˆå§‹åŒ–å¥½çš„ RCTBridge å®ä¾‹åˆå§‹åŒ–ä¸€ä¸ª RCTRootViewã€‚
```c++
id<RCTBridgeDelegate> moduleInitialiser = [[classThatImplementsRCTBridgeDelegate alloc] init];

RCTBridge *bridge = [[RCTBridge alloc] initWithDelegate:moduleInitialiser launchOptions:nil];

RCTRootView *rootView = [[RCTRootView alloc]
                        initWithBridge:bridge
                            moduleName:kModuleName
                     initialProperties:nil];
```

2. ç»™ JavaScript ç«¯å‘é€äº‹ä»¶
&emsp;å³ä½¿æ²¡æœ‰è¢« JavaScript è°ƒç”¨ï¼ŒåŸç”Ÿæ¨¡å—ä¹Ÿå¯ä»¥ç»™ JavaScript å‘é€äº‹ä»¶é€šçŸ¥ã€‚æœ€å¥½çš„æ–¹æ³•æ˜¯ç»§æ‰¿ RCTEventEmitterï¼Œå®ç° suppportEvents æ–¹æ³•å¹¶è°ƒç”¨ self sendEventWithName:ã€‚
```c++
// CalendarManager.h
#import <React/RCTBridgeModule.h>
#import <React/RCTEventEmitter.h>

@interface CalendarManager : RCTEventEmitter <RCTBridgeModule>

@end
```
```c++
// CalendarManager.m
#import "CalendarManager.h"

@implementation CalendarManager

RCT_EXPORT_MODULE();

- (NSArray<NSString *> *)supportedEvents
{
  return @[@"EventReminder"];
}

- (void)calendarEventReminderReceived:(NSNotification *)notification
{
  NSString *eventName = notification.userInfo[@"name"];
  [self sendEventWithName:@"EventReminder" body:@{@"name": eventName}];
}

@end
```
&emsp;JavaScript ç«¯çš„ä»£ç å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«ä½ çš„æ¨¡å—çš„NativeEventEmitterå®ä¾‹æ¥è®¢é˜…è¿™äº›äº‹ä»¶ã€‚
```c++
import { NativeEventEmitter, NativeModules } from 'react-native';
const { CalendarManager } = NativeModules;

const calendarManagerEmitter = new NativeEventEmitter(CalendarManager);

const subscription = calendarManagerEmitter.addListener(
  'EventReminder',
  (reminder) => console.log(reminder.name)
);
...
// åˆ«å¿˜äº†å–æ¶ˆè®¢é˜…ï¼Œé€šå¸¸åœ¨componentWillUnmountç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­å®ç°ã€‚
subscription.remove();
```

&emsp;å¦‚æœä½ å‘é€äº†ä¸€ä¸ªäº‹ä»¶å´æ²¡æœ‰ä»»ä½•ç›‘å¬å¤„ç†ï¼Œåˆ™ä¼šå› æ­¤æ”¶åˆ°ä¸€ä¸ªèµ„æºè­¦å‘Šã€‚è¦ä¼˜åŒ–å› æ­¤å¸¦æ¥çš„é¢å¤–å¼€é”€ï¼Œä½ å¯ä»¥åœ¨ä½ çš„RCTEventEmitterå­ç±»ä¸­è¦†ç›– startObserving å’Œ stopObserving æ–¹æ³•ã€‚
```c++
@implementation CalendarManager
{
  bool hasListeners;
}

// åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªç›‘å¬å‡½æ•°æ—¶è§¦å‘
-(void)startObserving {
    hasListeners = YES;
    // Set up any upstream listeners or background tasks as necessary
}

// Will be called when this module's last listener is removed, or on dealloc.
-(void)stopObserving {
    hasListeners = NO;
    // Remove upstream listeners, stop unnecessary background tasks
}

- (void)calendarEventReminderReceived:(NSNotification *)notification
{
  NSString *eventName = notification.userInfo[@"name"];
  if (hasListeners) { // Only send events if anyone is listening
    [self sendEventWithName:@"EventReminder" body:@{@"name": eventName}];
  }
}
```
&emsp;æ³¨æ„ï¼šReact Native å¸ƒå±€æ˜¯é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹è¿›è¡Œè®¡ç®—ï¼Œè€ŒåŸç”Ÿ UI è§†å›¾æ˜¯é€šè¿‡ä¸»çº¿ç¨‹æ›´æ–°ã€‚è¿™å¯èƒ½å¯¼è‡´çŸ­æš‚çš„åŸç”Ÿç«¯å’Œ React Native ç«¯çš„ä¸ä¸€è‡´ã€‚è¿™æ˜¯ä¸€ä¸ªå·²çŸ¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬çš„å›¢é˜Ÿå·²ç»åœ¨ç€æ‰‹è§£å†³ä¸åŒæºçš„ UI åŒæ­¥æ›´æ–°ã€‚ æ³¨æ„ï¼š é™¤éæ ¹è§†å›¾æˆä¸ºå…¶ä»–è§†å›¾çš„å­è§†å›¾ï¼Œå¦åˆ™ React Native ä¸ä¼šè¿›è¡Œä»»ä½•çš„å¸ƒå±€è®¡ç®—ã€‚å¦‚æœä½ æƒ³åœ¨è¿˜æ²¡æœ‰è·å¾— React Native è§†å›¾çš„å°ºå¯¸ä¹‹å‰å…ˆéšè—è§†å›¾ï¼Œè¯·å°†æ ¹è§†å›¾æ·»åŠ ä¸ºå­è§†å›¾å¹¶ä¸”åœ¨åˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œéšè—ï¼ˆä½¿ç”¨ UIView çš„ hidden å±æ€§ï¼‰ï¼Œç„¶ååœ¨ä»£ç†æ–¹æ³•ä¸­æ”¹å˜å®ƒçš„å¯è§æ€§ã€‚

## å±æ€§
&emsp;æˆ‘ä»¬èƒ½è®©è¿™ä¸ªç»„ä»¶å˜å¾—æ›´å¼ºå¤§çš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯è¦èƒ½å¤Ÿå°è£…ä¸€äº›åŸç”Ÿå±æ€§ä¾› Javascript ä½¿ç”¨ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿç¦ç”¨æ‰‹æŒ‡ææ”¾æ“ä½œï¼Œç„¶åæŒ‡å®šä¸€ä¸ªåˆå§‹çš„åœ°å›¾å¯è§åŒºåŸŸã€‚ç¦ç”¨ææ”¾æ“ä½œåªéœ€è¦ä¸€ä¸ªå¸ƒå°”å€¼ç±»å‹çš„å±æ€§å°±è¡Œäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ è¿™ä¹ˆä¸€è¡Œï¼š
```c++
// RNTMapManager.m
RCT_EXPORT_VIEW_PROPERTY(zoomEnabled, BOOL)
```
